<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:h="http://java.sun.com/jsf/html">
<h:head>
	<title>Quan ly Sinh Vien</title>
</h:head>
<h:body>
	<div id="header" style="background-color: aqua; border-color: black;">
		<ui:insert name="header">
			<ui:include src="/Header.xhtml" />
		</ui:insert>
	</div>
	<h:form>

			
				<p:commandButton value="Search" type="button"
					onclick="PF('dlg1').show();" />
					<p:commandButton value="Search Fillter" type="button"
					onclick="PF('dlg2').show();" />
					
					
				<p:dialog header="Search" widgetVar="dlg1" minHeight="40">
					<p:outputLabel for="txt1" value="Search" />
					<p:inputText id="txt1" value="#{controllerStudent.nameSearch}"
						required="true" label="nameSearch"></p:inputText>

					<p:outputLabel for="onemenu4" value="Column Search" />
					<p:selectOneMenu id="onemenu4" value="#{controllerStudent.column}">
						<f:selectItem itemLabel="Select One" itemValue="" />
						<f:selectItem itemLabel="NameStudent" itemValue="NameStudent" />
						<f:selectItem itemLabel="Village" itemValue="Village" />
						<f:selectItem itemLabel="Email" itemValue="Email" />
						<f:selectItem itemLabel="ALL" itemValue="ALL" />
						<f:selectItem itemLabel="fillter" itemValue="fillter" />
					</p:selectOneMenu>

					<p:commandButton id="buttonSearch" value="Search start"
						action="#{controllerStudent. getStudents()}" update="form">
						<f:ajax execute="buttonSearch" render="outResult" />
					</p:commandButton>
					<p:commandButton value="Reset"
						action="#{controllerStudent.Reset()}" update="form" />
					<h:outputText id="outResult"
						value="Results : Found #{controllerStudent.students.size()}">

					</h:outputText>
				</p:dialog>
				
				

	</h:form>
	<h:form id="searchFillter">
		<p:dialog header="Search Fillter" widgetVar="dlg2" minHeight="40">
								
						<p:outputLabel for="onemenu8" value="Value Age" />
					<p:selectOneMenu id="onemenu8" value="#{controllerStudent.valueAgeFillter}">
						<f:selectItem itemLabel="Select One" itemValue="" />
						<f:selectItem itemLabel="+" itemValue="cong" />
						<f:selectItem itemLabel="-" itemValue="tru" />
					</p:selectOneMenu>
					
						<p:outputLabel for="txt4" value="Age" />
					<p:inputText id="txt4" value="#{controllerStudent.ageStudentFillter}" 
						required="true" label="Age Fillter"></p:inputText> 
					
						
						<p:outputLabel for="txt5" value="Name" />
					<p:inputText id="txt5" value="#{controllerStudent.nameStudentFillter}"
						required="true" label="Name Fillter"></p:inputText>
						
						<p:outputLabel for="txt6" value="Village" />
					<p:inputText id="txt6" value="#{controllerStudent.villageStudentFillter}"
						required="true" label="Village Fillter"></p:inputText>
						
						<p:outputLabel for="txt7" value="Email" />
					<p:inputText id="txt7" value="#{controllerStudent.emailStudentFillter}"
						required="true" label="Email Fillter"></p:inputText>

					<p:commandButton id="buttonSearch2" value="Search start"
						action="#{controllerStudent. getStudents()}" update="form">
						<f:ajax execute="buttonSearch2" render="outResult1" />
					</p:commandButton>
					<p:commandButton value="Reset"
						action="#{controllerStudent.Reset()}" update="form" />
					<h:outputText id="outResult1"
						value="Results : Found #{controllerStudent.students.size()}">

					</h:outputText>
				</p:dialog>
	</h:form>
	<h:form id="form">
		<p:dataTable id="tbl" var="list" value="#{controllerStudent.students}"
			paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} "
			paginator="true" rows="15" style="margin-bottom:20px">


			<f:facet name="header">
				<p:commandButton value="AddStudent"
					style="margin-right:20px;float:left"
					styleClass="ui-priority-primary"
					action="#{controllerStudent.viewAddStudent()}" />
				<p:outputLabel for="onemenu" value="Sort By" />
				<p:selectOneMenu id="onemenu" value="#{controllerStudent.sort}">
				<f:selectItem itemLabel="Id" itemValue="Id" />
					<f:selectItem itemLabel="Age" itemValue="Age" />				
					<f:selectItem itemLabel="nameStudent" itemValue="nameStudent" />
				</p:selectOneMenu>

				<p:outputLabel for="onemenu1" value="increase/reduction" />
				<p:selectOneMenu id="onemenu1" value="#{controllerStudent.value}">
					<f:selectItem itemLabel="ASC" itemValue="ASC" />
					<f:selectItem itemLabel="DESC" itemValue="DESC" />
				</p:selectOneMenu>
				<p:commandButton action="#{controllerStudent. getStudents()}"
					value="Sort start" update="form">
				</p:commandButton>

			</f:facet>

			<p:column>
				<f:facet name="header">
					<h:outputText value="Id" />
				</f:facet>
				<h:outputText value="#{list.id}" update="form"/>
			</p:column>

			<p:column>	
				<f:facet name="header">
					<h:outputText value="nameStudent" />
				</f:facet>
				<h:outputText value="#{list.nameStudent}" />
			</p:column>

			<p:column>
				<f:facet name="header">
					<h:outputText value="Age" />
				</f:facet>
				<h:outputText value="#{list.age}" />
			</p:column>

			<p:column>
				<f:facet name="header">
					<h:outputText value="Village" />
				</f:facet>
				<h:outputText value="#{list.village}" />
			</p:column>

			<p:column>
				<f:facet name="header">
					<h:outputText value="Phone" />
				</f:facet>
				<h:outputText value="#{list.phone}" />
			</p:column>

			<p:column>
				<f:facet name="header">
					<h:outputText value="Email" />
				</f:facet>
				<h:outputText value=" #{list.email}" />
			</p:column>

			<p:column>
				<f:facet name="header">
					<h:outputText value="Note" />
				</f:facet>
				<h:outputText value="#{list.note}" />
			</p:column>

			<p:column>
				<f:facet name="header">
					<h:outputText value="Agv" />
				</f:facet>
				<h:outputText value="#{controllerStudent.Avg(list.id)}" />
			</p:column>

			<p:column>
				<f:facet name="header">
					<h:outputText value="Birth Day" />
				</f:facet>
				<h:outputText value="#{list.birthDay}" >
				<f:convertDateTime pattern="dd.MM.yyyy" /></h:outputText>
			</p:column>

			<p:column>
				<f:facet name="header">
					<h:outputText value="Pass/Failed" />
				</f:facet>
				<h:outputText value="#{controllerStudent.pass_Failed()}" />
			</p:column>
			
			<p:column>
			<f:facet name="header">
					<h:outputText value="Action" />
				</f:facet>
			<p:splitButton id="Detail" value="Detail" action="#{controllerStudent.DetailStudent(list.id)}"  icon="pi pi-save">
            <p:menuitem  id="edit" value="Update" action="#{controllerStudent.viewEditStudent(list.id)}"  icon="pi pi-refresh" >
            <f:ajax execute="edit" render="tbl" /></p:menuitem>
            <p:menuitem value="Delete" action="#{controllerStudent.Delete(list.id)}" ajax="false" icon="pi pi-times" />
        </p:splitButton> 
			</p:column>

		</p:dataTable>

	</h:form>

</h:body>
</html>